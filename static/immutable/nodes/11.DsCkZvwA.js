var xt=Object.defineProperty;var et=e=>{throw TypeError(e)};var pt=(e,r,s)=>r in e?xt(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s;var rt=(e,r,s)=>pt(e,typeof r!="symbol"?r+"":r,s),kt=(e,r,s)=>r.has(e)||et("Cannot "+s);var v=(e,r,s)=>(kt(e,r,"read from private field"),s?s.call(e):r.get(e)),_=(e,r,s)=>r.has(e)?et("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,s);import{f as C,a as y,d as lt}from"../chunks/DnjaPt04.js";import"../chunks/BAZrO3Iu.js";import{aI as T,a6 as S,F as g,Y as w,aK as B,p as N,c as x,r as m,s as k,t as A,a as U,f as bt,C as X,G as z}from"../chunks/CmKEeTDN.js";import{d as K,s as M}from"../chunks/BWnq4Zhz.js";import{i as R}from"../chunks/DYKRNVlE.js";import{i as _t}from"../chunks/yWBesB1q.js";import{e as at,i as ct}from"../chunks/lbEyByoZ.js";import{s as ft}from"../chunks/MTNBMRy_.js";import{p as Q}from"../chunks/9hrFU6Fy.js";/* empty css                */const i=6,b=3;function ut(e,r,s,n=1){const t=[],o=e.map(l=>l==="."?["O","X"]:[l]);return ht(o,r,s)&&vt(o,r,s,t,n),t}function ht(e,r,s){let n=!0;for(;n;){n=!1;for(let t=0;t<i;t++)for(let o=0;o<i-1;o++){const l=r[t][o];if(l===".")continue;const a=t*i+o,f=a+1,c=ot(e,a,f,l);if(!c.ok)return!1;c.changed&&(n=!0)}for(let t=0;t<i-1;t++)for(let o=0;o<i;o++){const l=s[t][o];if(l===".")continue;const a=t*i+o,f=a+i,c=ot(e,a,f,l);if(!c.ok)return!1;c.changed&&(n=!0)}for(let t=0;t<i;t++){const o=st(e,t,!0);if(!o.ok)return!1;o.changed&&(n=!0);const l=st(e,t,!1);if(!l.ok)return!1;l.changed&&(n=!0)}for(let t=0;t<i;t++)for(let o=0;o<=i-3;o++){const l=nt(e,t*i+o,t*i+o+1,t*i+o+2);if(!l.ok)return!1;l.changed&&(n=!0)}for(let t=0;t<i;t++)for(let o=0;o<=i-3;o++){const l=nt(e,o*i+t,(o+1)*i+t,(o+2)*i+t);if(!l.ok)return!1;l.changed&&(n=!0)}for(let t=0;t<e.length;t++)if(e[t].length===0)return!1}return!0}function nt(e,r,s,n){let t=!1;if(e[r].length===1&&e[s].length===1&&e[r][0]===e[s][0]){const o=e[r][0]==="O"?"X":"O";if(e[n].length===1){if(e[n][0]!==o)return{ok:!1,changed:t}}else e[n]=[o],t=!0}if(e[s].length===1&&e[n].length===1&&e[s][0]===e[n][0]){const o=e[s][0]==="O"?"X":"O";if(e[r].length===1){if(e[r][0]!==o)return{ok:!1,changed:t}}else e[r]=[o],t=!0}if(e[r].length===1&&e[n].length===1&&e[r][0]===e[n][0]){const o=e[r][0]==="O"?"X":"O";if(e[s].length===1){if(e[s][0]!==o)return{ok:!1,changed:t}}else e[s]=[o],t=!0}return{ok:!0,changed:t}}function ot(e,r,s,n){let t=!1;if(n==="="){if(e[r].length===1){const o=e[r][0];if(!e[s].includes(o))return{ok:!1,changed:t};e[s].length>1&&(e[s]=[o],t=!0)}if(e[s].length===1){const o=e[s][0];if(!e[r].includes(o))return{ok:!1,changed:t};e[r].length>1&&(e[r]=[o],t=!0)}}else if(n==="x"){if(e[r].length===1){const l=e[r][0]==="O"?"X":"O";if(!e[s].includes(l))return{ok:!1,changed:t};e[s].length>1&&(e[s]=[l],t=!0)}if(e[s].length===1){const l=e[s][0]==="O"?"X":"O";if(!e[r].includes(l))return{ok:!1,changed:t};e[r].length>1&&(e[r]=[l],t=!0)}}return{ok:!0,changed:t}}function st(e,r,s){let n=0,t=0,o=!1;for(let l=0;l<i;l++){const a=s?r*i+l:l*i+r;e[a].length===1&&(e[a][0]==="O"?n++:t++)}if(n>b||t>b)return{ok:!1,changed:o};if(n===b)for(let l=0;l<i;l++){const a=s?r*i+l:l*i+r;e[a].length>1&&(e[a]=["X"],o=!0)}if(t===b)for(let l=0;l<i;l++){const a=s?r*i+l:l*i+r;e[a].length>1&&(e[a]=["O"],o=!0)}return{ok:!0,changed:o}}function vt(e,r,s,n,t){if(n.length>=t)return;let o=-1,l=1/0;for(let a=0;a<e.length;a++)e[a].length>1&&e[a].length<l&&(l=e[a].length,o=a);if(o===-1){const a=e.map(f=>f[0]);yt(a,r,s)&&n.push(a);return}for(const a of e[o]){const f=e.map(c=>[...c]);if(f[o]=[a],ht(f,r,s)&&(vt(f,r,s,n,t),n.length>=t))return}}function yt(e,r,s){for(let n=0;n<i;n++){let t=0,o=0;for(let l=0;l<i;l++)e[n*i+l]==="O"&&t++,e[l*i+n]==="O"&&o++;if(t!==b||o!==b)return!1}for(let n=0;n<i;n++)for(let t=0;t<=i-3;t++){const o=e[n*i+t];if(o===e[n*i+t+1]&&o===e[n*i+t+2])return!1}for(let n=0;n<i;n++)for(let t=0;t<=i-3;t++){const o=e[t*i+n];if(o===e[(t+1)*i+n]&&o===e[(t+2)*i+n])return!1}for(let n=0;n<i;n++)for(let t=0;t<i-1;t++){const o=r[n][t];if(o==="="&&e[n*i+t]!==e[n*i+t+1]||o==="x"&&e[n*i+t]===e[n*i+t+1])return!1}for(let n=0;n<i-1;n++)for(let t=0;t<i;t++){const o=s[n][t];if(o==="="&&e[n*i+t]!==e[(n+1)*i+t]||o==="x"&&e[n*i+t]===e[(n+1)*i+t])return!1}return!0}const wt={medium:{minRemoved:24,maxRemoved:30},hard:{minRemoved:28,maxRemoved:34},extreme:{minRemoved:32,maxRemoved:36},"extreme+":{minRemoved:28,maxRemoved:36}};function Ct(){return{hConstraints:Array.from({length:i},()=>new Array(i-1).fill(".")),vConstraints:Array.from({length:i-1},()=>new Array(i).fill("."))}}function Ot(e){const r=wt[e],s=gt();if(e==="extreme+"){const{hConstraints:l,vConstraints:a}=Ct();return{board:it(s,l,a,r.minRemoved,r.maxRemoved),solution:s,hConstraints:l,vConstraints:a,difficulty:e}}const{hConstraints:n,vConstraints:t}=Tt(s),o=it(s,n,t,r.minRemoved,r.maxRemoved);return Xt(o,n,t),{board:o,solution:s,hConstraints:n,vConstraints:t,difficulty:e}}function gt(){const e=new Array(i*i).fill("."),r=new Array(i).fill(0);return dt(e,r,0)?e:gt()}function dt(e,r,s){if(s===i)return!0;const t=$([0,1,2,3,4,5],b);tt(t);for(const o of t){const l=new Set(o);let a=!0;const f=[];for(let c=0;c<i;c++)f.push(l.has(c)?"O":"X");for(let c=0;c<i;c++){const h=l.has(c);if(h&&r[c]>=b){a=!1;break}if(!h&&s-r[c]>=b){a=!1;break}}if(a){for(let c=0;c<=i-3;c++)if(f[c]===f[c+1]&&f[c]===f[c+2]){a=!1;break}if(a){if(s>=2)for(let c=0;c<i;c++){const h=e[(s-1)*i+c],O=e[(s-2)*i+c];if(f[c]===h&&f[c]===O){a=!1;break}}if(a){for(let c=0;c<i;c++)e[s*i+c]=l.has(c)?"O":"X",l.has(c)&&r[c]++;if(dt(e,r,s+1))return!0;for(let c=0;c<i;c++)e[s*i+c]=".",l.has(c)&&r[c]--}}}}return!1}function $(e,r){if(r===0)return[[]];if(e.length<r)return[];const s=[],[n,...t]=e;for(const o of $(t,r-1))s.push([n,...o]);return s.push(...$(t,r)),s}function Tt(e){const r=Array.from({length:i},()=>new Array(i-1).fill(".")),s=Array.from({length:i-1},()=>new Array(i).fill("."));for(let n=0;n<i;n++)for(let t=0;t<i-1;t++){const o=e[n*i+t],l=e[n*i+t+1];r[n][t]=o===l?"=":"x"}for(let n=0;n<i-1;n++)for(let t=0;t<i;t++){const o=e[n*i+t],l=e[(n+1)*i+t];s[n][t]=o===l?"=":"x"}return{hConstraints:r,vConstraints:s}}function Xt(e,r,s){const n=[];for(let t=0;t<i;t++)for(let o=0;o<i-1;o++)r[t][o]!=="."&&n.push({type:"h",r:t,c:o});for(let t=0;t<i-1;t++)for(let o=0;o<i;o++)s[t][o]!=="."&&n.push({type:"v",r:t,c:o});tt(n);for(const t of n){const o=t.type==="h"?r:s,l=o[t.r][t.c];o[t.r][t.c]=".",ut(e,r,s,2).length!==1&&(o[t.r][t.c]=l)}}function it(e,r,s,n,t){const o=[...e],l=Array.from({length:i*i},(c,h)=>h);tt(l);let a=0;const f=n+Math.floor(Math.random()*(t-n+1));for(const c of l){if(a>=f)break;const h=o[c];o[c]=".",ut(o,r,s,2).length===1?a++:o[c]=h}return o}function tt(e){for(let r=e.length-1;r>0;r--){const s=Math.floor(Math.random()*(r+1));[e[r],e[s]]=[e[s],e[r]]}}function zt(e,r,s){for(let n=0;n<e.length;n++)if(e[n]===".")return!1;for(let n=0;n<i;n++){let t=0,o=0,l=0,a=0;for(let f=0;f<i;f++)e[n*i+f]==="O"?t++:o++,e[f*i+n]==="O"?l++:a++;if(t!==b||o!==b||l!==b||a!==b)return!1}for(let n=0;n<i;n++)for(let t=0;t<=i-3;t++){const o=e[n*i+t];if(o===e[n*i+t+1]&&o===e[n*i+t+2])return!1}for(let n=0;n<i;n++)for(let t=0;t<=i-3;t++){const o=e[t*i+n];if(o===e[(t+1)*i+n]&&o===e[(t+2)*i+n])return!1}for(let n=0;n<i;n++)for(let t=0;t<i-1;t++){const o=r[n][t],l=e[n*i+t],a=e[n*i+t+1];if(o==="="&&l!==a||o==="x"&&l===a)return!1}for(let n=0;n<i-1;n++)for(let t=0;t<i;t++){const o=s[n][t],l=e[n*i+t],a=e[(n+1)*i+t];if(o==="="&&l!==a||o==="x"&&l===a)return!1}return!0}var G,W,D,L,P,j,E,F,V,Y,q;class At{constructor(){_(this,G,T(S([])));_(this,W,T(S([])));_(this,D,T(S([])));_(this,L,T(S([])));_(this,P,T(S([])));_(this,j,T(S([])));_(this,E,T("hard"));_(this,F,T(0));_(this,V,T(!1));rt(this,"timerInterval",null);_(this,Y,B(()=>this.initialBoard.map(r=>r!==".")));_(this,q,B(()=>this.won));this.newGame("hard")}get board(){return g(v(this,G))}set board(r){w(v(this,G),r,!0)}get initialBoard(){return g(v(this,W))}set initialBoard(r){w(v(this,W),r,!0)}get solution(){return g(v(this,D))}set solution(r){w(v(this,D),r,!0)}get hConstraints(){return g(v(this,L))}set hConstraints(r){w(v(this,L),r,!0)}get vConstraints(){return g(v(this,P))}set vConstraints(r){w(v(this,P),r,!0)}get moves(){return g(v(this,j))}set moves(r){w(v(this,j),r,!0)}get difficulty(){return g(v(this,E))}set difficulty(r){w(v(this,E),r,!0)}get elapsed(){return g(v(this,F))}set elapsed(r){w(v(this,F),r,!0)}get won(){return g(v(this,V))}set won(r){w(v(this,V),r,!0)}get locked(){return g(v(this,Y))}set locked(r){w(v(this,Y),r)}get isWon(){return g(v(this,q))}set isWon(r){w(v(this,q),r)}newGame(r){this.difficulty=r;const s=Ot(r);this.board=[...s.board],this.initialBoard=[...s.board],this.solution=[...s.solution],this.hConstraints=s.hConstraints,this.vConstraints=s.vConstraints,this.moves=[],this.won=!1,this.elapsed=0,this.startTimer()}toggleCell(r,s){if(this.won||this.locked[r])return;const n=this.board[r],t=s?["O","X","."]:[".","X","O"],o=t.indexOf(n),l=t[(o+1)%t.length];this.moves=[...this.moves,{index:r,previousValue:n}],this.board[r]=l,this.checkWinCondition()}undo(){if(this.moves.length===0)return;const r=this.moves[this.moves.length-1];this.moves=this.moves.slice(0,-1),this.board[r.index]=r.previousValue}clear(){this.board=[...this.initialBoard],this.moves=[]}checkWinCondition(){zt(this.board,this.hConstraints,this.vConstraints)&&(this.won=!0,this.stopTimer())}startTimer(){this.stopTimer(),this.elapsed=0,this.timerInterval=setInterval(()=>{this.elapsed++},1e3)}stopTimer(){this.timerInterval!==null&&(clearInterval(this.timerInterval),this.timerInterval=null)}get formattedTime(){const r=Math.floor(this.elapsed/60),s=this.elapsed%60;return`${r.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}destroy(){this.stopTimer()}}G=new WeakMap,W=new WeakMap,D=new WeakMap,L=new WeakMap,P=new WeakMap,j=new WeakMap,E=new WeakMap,F=new WeakMap,V=new WeakMap,Y=new WeakMap,q=new WeakMap;const u=new At;function St(e,r,s){var n;e.preventDefault(),!r()&&((n=s.onclick)==null||n.call(s))}function Bt(e,r,s){var n;e.preventDefault(),!r()&&((n=s.onrightclick)==null||n.call(s))}var It=lt('<svg class="w-3/5 h-3/5 text-amber-400 drop-shadow-sm" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="10"></circle></svg>'),Rt=lt('<svg class="w-3/5 h-3/5 text-indigo-400 drop-shadow-sm" viewBox="0 0 24 24" fill="currentColor"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>'),Mt=C(`<span class="absolute top-1/2 right-0 translate-x-1/2 -translate-y-1/2 z-10
      text-[10px] font-bold text-stone-500 bg-stone-200 rounded-full w-4 h-4
      flex items-center justify-center pointer-events-none leading-none"> </span>`),Gt=C(`<span class="absolute bottom-0 left-1/2 translate-y-1/2 -translate-x-1/2 z-10
      text-[10px] font-bold text-stone-500 bg-stone-200 rounded-full w-4 h-4
      flex items-center justify-center pointer-events-none leading-none"> </span>`),Wt=C('<div class="relative"><button><!></button> <!> <!></div>');function Dt(e,r){N(r,!0);let s=Q(r,"locked",3,!1),n=Q(r,"rightConstraint",3,"."),t=Q(r,"bottomConstraint",3,".");var o=Wt(),l=x(o);l.__click=[St,s,r],l.__contextmenu=[Bt,s,r];var a=x(l);{var f=d=>{var p=It();y(d,p)},c=(d,p)=>{{var I=J=>{var mt=Rt();y(J,mt)};R(d,J=>{r.value==="X"&&J(I)},p)}};R(a,d=>{r.value==="O"?d(f):d(c,!1)})}m(l);var h=k(l,2);{var O=d=>{var p=Mt(),I=x(p,!0);m(p),A(()=>M(I,n())),y(d,p)};R(h,d=>{n()!=="."&&d(O)})}var Z=k(h,2);{var H=d=>{var p=Gt(),I=x(p,!0);m(p),A(()=>M(I,t())),y(d,p)};R(Z,d=>{t()!=="."&&d(H)})}m(o),A(()=>ft(l,1,`aspect-square w-full flex items-center justify-center rounded-sm transition-colors
      ${s()?"bg-stone-100 cursor-default":"bg-white cursor-pointer hover:bg-stone-50 active:bg-stone-100"}`)),y(e,o),U()}K(["click","contextmenu"]);var Lt=C('<div class="grid grid-cols-6 gap-1 bg-stone-200 p-1 rounded-xl aspect-square"></div>');function Pt(e,r){N(r,!0);var s=Lt();at(s,21,()=>r.board,ct,(n,t,o)=>{const l=B(()=>Math.floor(o/i)),a=B(()=>o%i),f=B(()=>g(a)<i-1?r.hConstraints[g(l)][g(a)]:"."),c=B(()=>g(l)<i-1?r.vConstraints[g(l)][g(a)]:".");Dt(n,{get value(){return g(t)},get locked(){return r.locked[o]},get rightConstraint(){return g(f)},get bottomConstraint(){return g(c)},onclick:()=>{var h;return(h=r.ontoggle)==null?void 0:h.call(r,o,!0)},onrightclick:()=>{var h;return(h=r.ontoggle)==null?void 0:h.call(r,o,!1)}})}),m(s),y(e,s),U()}var jt=C('<div class="flex items-center gap-2 px-4 py-2 bg-white border border-stone-200 rounded-full text-sm font-mono text-stone-600"><svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> </div>');function Et(e,r){var s=jt(),n=k(x(s));m(s),A(()=>M(n,` ${r.time??""}`)),y(e,s)}async function Ft(e,r){const s=`I completed a Tango puzzle in ${r.time}!`;if(navigator.share)try{await navigator.share({text:s})}catch{}else await navigator.clipboard.writeText(s)}var Vt=C('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"><div class="bg-white rounded-2xl shadow-xl p-8 mx-4 max-w-sm w-full text-center space-y-5"><h2 class="text-2xl font-bold text-stone-800">Puzzle Complete!</h2> <p class="text-stone-500">Solved in <span class="font-mono font-semibold text-stone-700"> </span></p> <div class="flex gap-3 justify-center"><button class="px-5 py-2.5 rounded-xl bg-indigo-500 text-white font-medium hover:bg-indigo-600 transition-colors cursor-pointer">Share</button> <button class="px-5 py-2.5 rounded-xl bg-stone-100 text-stone-700 font-medium hover:bg-stone-200 transition-colors cursor-pointer">Play Again</button></div></div></div>');function Yt(e,r){var s=Vt(),n=x(s),t=k(x(n),2),o=k(x(t)),l=x(o,!0);m(o),m(t);var a=k(t,2),f=x(a);f.__click=[Ft,r];var c=k(f,2);c.__click=function(...h){var O;(O=r.onplayagain)==null||O.apply(this,h)},m(a),m(n),m(s),A(()=>M(l,r.time)),y(e,s)}K(["click"]);var qt=(e,r,s)=>r.onselect(g(s)),Nt=C("<button> </button>"),Ut=C('<div class="flex gap-1 bg-stone-100 p-1 rounded-xl"></div>');function Kt(e,r){N(r,!0);const s=["medium","hard","extreme","extreme+"];var n=Ut();at(n,21,()=>s,ct,(t,o)=>{var l=Nt();l.__click=[qt,r,o];var a=x(l,!0);m(l),A(()=>{ft(l,1,`px-4 py-1.5 rounded-lg text-sm font-medium capitalize transition-all cursor-pointer
        ${r.selected===g(o)?"bg-white text-stone-800 shadow-sm":"text-stone-500 hover:text-stone-700"}`),M(a,g(o))}),y(t,l)}),m(n),y(e,n),U()}K(["click"]);var Zt=()=>u.undo(),Ht=()=>u.clear(),Jt=C(`<div class="flex flex-col items-center gap-5 w-full max-w-sm mx-auto px-4"><h1 class="text-3xl font-bold text-stone-800 tracking-tight">Tango</h1> <div class="flex items-center gap-4 w-full justify-between"><!> <!></div> <div class="w-full"><!></div> <div class="flex gap-3"><button class="px-5 py-2 rounded-xl bg-stone-100 text-stone-700 font-medium hover:bg-stone-200 transition-colors
        disabled:opacity-40 disabled:cursor-not-allowed cursor-pointer">Undo</button> <button class="px-5 py-2 rounded-xl bg-stone-100 text-stone-700 font-medium hover:bg-stone-200 transition-colors cursor-pointer">Clear</button></div></div> <!>`,1);function Qt(e,r){N(r,!1),_t();var s=Jt(),n=bt(s),t=k(x(n),2),o=x(t);Kt(o,{get selected(){return z(u),X(()=>u.difficulty)},onselect:d=>u.newGame(d)});var l=k(o,2);Et(l,{get time(){return z(u),X(()=>u.formattedTime)}}),m(t);var a=k(t,2),f=x(a);Pt(f,{get board(){return z(u),X(()=>u.board)},get locked(){return z(u),X(()=>u.locked)},get hConstraints(){return z(u),X(()=>u.hConstraints)},get vConstraints(){return z(u),X(()=>u.vConstraints)},ontoggle:(d,p)=>u.toggleCell(d,p)}),m(a);var c=k(a,2),h=x(c);h.__click=[Zt];var O=k(h,2);O.__click=[Ht],m(c),m(n);var Z=k(n,2);{var H=d=>{Yt(d,{get time(){return z(u),X(()=>u.formattedTime)},onplayagain:()=>u.newGame(u.difficulty)})};R(Z,d=>{z(u),X(()=>u.won)&&d(H)})}A(()=>h.disabled=(z(u),X(()=>u.moves.length===0))),y(e,s),U()}K(["click"]);var $t=C('<main class="min-h-svh bg-stone-50 flex items-start justify-center pt-10 pb-16 select-none"><!></main>');function ue(e){var r=$t(),s=x(r);Qt(s,{}),m(r),y(e,r)}export{ue as component};
