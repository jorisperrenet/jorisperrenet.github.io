import{f as w,a as y,b as _e}from"../chunks/GyR0bfz1.js";import{p as Ge,A as b,B as T,c as p,s as _,t as X,a as Ve,C as x,o as i,D as G,F as je,r as g}from"../chunks/Df4p9Ujg.js";import{d as qe,s as M}from"../chunks/BwWujeC8.js";import{i as z}from"../chunks/Cflzb7_P.js";import{e as pe,i as xe}from"../chunks/o8233Mdz.js";import{s as de}from"../chunks/DvhUdLDR.js";/* empty css                */function Ue(C,d,n){if(i(d).length===0)return;const v=i(d)[i(d).length-1];x(d,i(d).slice(0,-1),!0),i(n)[v.index]=v.previousValue}function Ne(C,d,n,v){x(d,[...i(n)],!0),x(v,[],!0)}async function Ye(C,d){const n=`I completed a Tango puzzle in ${i(d)()}!`;if(navigator.share)try{await navigator.share({text:n})}catch{}else await navigator.clipboard.writeText(n)}var $e=(C,d,n)=>d(i(n)),We=w("<button> </button>"),Ze=w('<div class="aspect-square rounded-xl bg-stone-200 p-1 flex items-center justify-center"><span class="text-stone-400 text-lg">Generatingâ€¦</span></div>'),He=_e('<svg class="w-3/5 h-3/5 text-amber-400 drop-shadow-sm" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="10"></circle></svg>'),Je=_e('<svg class="w-3/5 h-3/5 text-indigo-400 drop-shadow-sm" viewBox="0 0 24 24" fill="currentColor"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>'),Ke=w(`<span class="absolute top-1/2 right-0 translate-x-1/2 -translate-y-1/2 z-10
                  text-[10px] font-bold text-stone-500 bg-stone-200 rounded-full w-4 h-4
                  flex items-center justify-center pointer-events-none leading-none"> </span>`),Qe=w(`<span class="absolute bottom-0 left-1/2 translate-y-1/2 -translate-x-1/2 z-10
                  text-[10px] font-bold text-stone-500 bg-stone-200 rounded-full w-4 h-4
                  flex items-center justify-center pointer-events-none leading-none"> </span>`),et=w('<div class="relative"><button><!></button> <!> <!></div>'),tt=w('<div class="grid grid-cols-6 gap-1 bg-stone-200 p-1 rounded-xl aspect-square"></div>'),rt=(C,d,n)=>d(i(n)),nt=w('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm"><div class="bg-white rounded-2xl shadow-xl p-8 mx-4 max-w-sm w-full text-center space-y-5"><h2 class="text-2xl font-bold text-stone-800">Puzzle Complete!</h2> <p class="text-stone-500">Solved in <span class="font-mono font-semibold text-stone-700"> </span></p> <div class="flex gap-3 justify-center"><button class="px-5 py-2.5 rounded-xl bg-indigo-500 text-white font-medium hover:bg-indigo-600 transition-colors cursor-pointer">Share</button> <button class="px-5 py-2.5 rounded-xl bg-stone-100 text-stone-700 font-medium hover:bg-stone-200 transition-colors cursor-pointer">Play Again</button></div></div></div>'),ot=w(`<main class="min-h-svh bg-stone-50 flex items-start justify-center pt-10 pb-16 select-none"><div class="flex flex-col items-center gap-5 w-full max-w-sm mx-auto px-4"><h1 class="text-3xl font-bold text-stone-800 tracking-tight">Tango</h1> <div class="flex items-center gap-4 w-full justify-between"><div class="flex gap-1 bg-stone-100 p-1 rounded-xl"></div> <div class="flex items-center gap-2 px-4 py-2 bg-white border border-stone-200 rounded-full text-sm font-mono text-stone-600"><svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> </div></div> <div class="w-full"><!></div> <div class="flex gap-3"><button class="px-5 py-2 rounded-xl bg-stone-100 text-stone-700 font-medium hover:bg-stone-200 transition-colors
          disabled:opacity-40 disabled:cursor-not-allowed cursor-pointer">Undo</button> <button class="px-5 py-2 rounded-xl bg-stone-100 text-stone-700 font-medium hover:bg-stone-200 transition-colors
          disabled:opacity-40 disabled:cursor-not-allowed cursor-pointer">Clear</button></div></div> <!></main>`);function vt(C,d){Ge(d,!0);const n=6,v=3,me={medium:{minRemoved:24,maxRemoved:30},hard:{minRemoved:28,maxRemoved:34},extreme:{minRemoved:32,maxRemoved:36},"extreme+":{minRemoved:28,maxRemoved:36}},ke=["medium","hard","extreme","extreme+"];function te(t,l,s,r=1){const e=[],o=t.map(f=>f==="."?["O","X"]:[f]);return re(o,l,s)&&se(o,l,s,e,r),e}function re(t,l,s){let r=!0;for(;r;){r=!1;for(let e=0;e<n;e++)for(let o=0;o<n-1;o++){const f=l[e][o];if(f===".")continue;const c=e*n+o,u=oe(t,c,c+1,f);if(!u.ok)return!1;u.changed&&(r=!0)}for(let e=0;e<n-1;e++)for(let o=0;o<n;o++){const f=s[e][o];if(f===".")continue;const c=e*n+o,u=oe(t,c,c+n,f);if(!u.ok)return!1;u.changed&&(r=!0)}for(let e=0;e<n;e++){const o=le(t,e,!0);if(!o.ok)return!1;o.changed&&(r=!0);const f=le(t,e,!1);if(!f.ok)return!1;f.changed&&(r=!0)}for(let e=0;e<n;e++)for(let o=0;o<=n-3;o++){const f=ne(t,e*n+o,e*n+o+1,e*n+o+2);if(!f.ok)return!1;f.changed&&(r=!0)}for(let e=0;e<n;e++)for(let o=0;o<=n-3;o++){const f=ne(t,o*n+e,(o+1)*n+e,(o+2)*n+e);if(!f.ok)return!1;f.changed&&(r=!0)}for(let e=0;e<t.length;e++)if(t[e].length===0)return!1}return!0}function ne(t,l,s,r){let e=!1;if(t[l].length===1&&t[s].length===1&&t[l][0]===t[s][0]){const o=t[l][0]==="O"?"X":"O";if(t[r].length===1){if(t[r][0]!==o)return{ok:!1,changed:e}}else t[r]=[o],e=!0}if(t[s].length===1&&t[r].length===1&&t[s][0]===t[r][0]){const o=t[s][0]==="O"?"X":"O";if(t[l].length===1){if(t[l][0]!==o)return{ok:!1,changed:e}}else t[l]=[o],e=!0}if(t[l].length===1&&t[r].length===1&&t[l][0]===t[r][0]){const o=t[l][0]==="O"?"X":"O";if(t[s].length===1){if(t[s][0]!==o)return{ok:!1,changed:e}}else t[s]=[o],e=!0}return{ok:!0,changed:e}}function oe(t,l,s,r){let e=!1;if(r==="="){if(t[l].length===1){const o=t[l][0];if(!t[s].includes(o))return{ok:!1,changed:e};t[s].length>1&&(t[s]=[o],e=!0)}if(t[s].length===1){const o=t[s][0];if(!t[l].includes(o))return{ok:!1,changed:e};t[l].length>1&&(t[l]=[o],e=!0)}}else if(r==="x"){if(t[l].length===1){const f=t[l][0]==="O"?"X":"O";if(!t[s].includes(f))return{ok:!1,changed:e};t[s].length>1&&(t[s]=[f],e=!0)}if(t[s].length===1){const f=t[s][0]==="O"?"X":"O";if(!t[l].includes(f))return{ok:!1,changed:e};t[l].length>1&&(t[l]=[f],e=!0)}}return{ok:!0,changed:e}}function le(t,l,s){let r=0,e=0,o=!1;for(let f=0;f<n;f++){const c=s?l*n+f:f*n+l;t[c].length===1&&(t[c][0]==="O"?r++:e++)}if(r>v||e>v)return{ok:!1,changed:o};if(r===v)for(let f=0;f<n;f++){const c=s?l*n+f:f*n+l;t[c].length>1&&(t[c]=["X"],o=!0)}if(e===v)for(let f=0;f<n;f++){const c=s?l*n+f:f*n+l;t[c].length>1&&(t[c]=["O"],o=!0)}return{ok:!0,changed:o}}function se(t,l,s,r,e){if(r.length>=e)return;let o=-1,f=1/0;for(let c=0;c<t.length;c++)t[c].length>1&&t[c].length<f&&(f=t[c].length,o=c);if(o===-1){const c=t.map(u=>u[0]);ye(c,l,s)&&r.push(c);return}for(const c of t[o]){const u=t.map(a=>[...a]);if(u[o]=[c],re(u,l,s)&&(se(u,l,s,r,e),r.length>=e))return}}function ye(t,l,s){for(let r=0;r<n;r++){let e=0,o=0;for(let f=0;f<n;f++)t[r*n+f]==="O"&&e++,t[f*n+r]==="O"&&o++;if(e!==v||o!==v)return!1}for(let r=0;r<n;r++)for(let e=0;e<=n-3;e++){const o=t[r*n+e];if(o===t[r*n+e+1]&&o===t[r*n+e+2])return!1}for(let r=0;r<n;r++)for(let e=0;e<=n-3;e++){const o=t[e*n+r];if(o===t[(e+1)*n+r]&&o===t[(e+2)*n+r])return!1}for(let r=0;r<n;r++)for(let e=0;e<n-1;e++){const o=l[r][e];if(o==="="&&t[r*n+e]!==t[r*n+e+1]||o==="x"&&t[r*n+e]===t[r*n+e+1])return!1}for(let r=0;r<n-1;r++)for(let e=0;e<n;e++){const o=s[r][e];if(o==="="&&t[r*n+e]!==t[(r+1)*n+e]||o==="x"&&t[r*n+e]===t[(r+1)*n+e])return!1}return!0}function be(t){const l=me[t],s=fe();if(t==="extreme+"){const{hConstraints:f,vConstraints:c}=we();return{board:ie(s,f,c,l.minRemoved,l.maxRemoved),solution:s,hConstraints:f,vConstraints:c,difficulty:t}}const{hConstraints:r,vConstraints:e}=Oe(s),o=ie(s,r,e,l.minRemoved,l.maxRemoved);return Ce(o,r,e),{board:o,solution:s,hConstraints:r,vConstraints:e,difficulty:t}}function we(){return{hConstraints:Array.from({length:n},()=>new Array(n-1).fill(".")),vConstraints:Array.from({length:n-1},()=>new Array(n).fill("."))}}function fe(){const t=new Array(n*n).fill("."),l=new Array(n).fill(0);return ce(t,l,0)?t:fe()}function ce(t,l,s){if(s===n)return!0;const e=V([0,1,2,3,4,5],v);j(e);for(const o of e){const f=new Set(o);let c=!0;const u=[];for(let a=0;a<n;a++)u.push(f.has(a)?"O":"X");for(let a=0;a<n;a++){const k=f.has(a);if(k&&l[a]>=v){c=!1;break}if(!k&&s-l[a]>=v){c=!1;break}}if(c){for(let a=0;a<=n-3;a++)if(u[a]===u[a+1]&&u[a]===u[a+2]){c=!1;break}if(c){if(s>=2)for(let a=0;a<n;a++){const k=t[(s-1)*n+a],P=t[(s-2)*n+a];if(u[a]===k&&u[a]===P){c=!1;break}}if(c){for(let a=0;a<n;a++)t[s*n+a]=f.has(a)?"O":"X",f.has(a)&&l[a]++;if(ce(t,l,s+1))return!0;for(let a=0;a<n;a++)t[s*n+a]=".",f.has(a)&&l[a]--}}}}return!1}function V(t,l){if(l===0)return[[]];if(t.length<l)return[];const s=[],[r,...e]=t;for(const o of V(e,l-1))s.push([r,...o]);return s.push(...V(e,l)),s}function Oe(t){const l=Array.from({length:n},()=>new Array(n-1).fill(".")),s=Array.from({length:n-1},()=>new Array(n).fill("."));for(let r=0;r<n;r++)for(let e=0;e<n-1;e++)l[r][e]=t[r*n+e]===t[r*n+e+1]?"=":"x";for(let r=0;r<n-1;r++)for(let e=0;e<n;e++)s[r][e]=t[r*n+e]===t[(r+1)*n+e]?"=":"x";return{hConstraints:l,vConstraints:s}}function Ce(t,l,s){const r=[];for(let e=0;e<n;e++)for(let o=0;o<n-1;o++)l[e][o]!=="."&&r.push({type:"h",r:e,c:o});for(let e=0;e<n-1;e++)for(let o=0;o<n;o++)s[e][o]!=="."&&r.push({type:"v",r:e,c:o});j(r);for(const e of r){const o=e.type==="h"?l:s,f=o[e.r][e.c];o[e.r][e.c]=".",te(t,l,s,2).length!==1&&(o[e.r][e.c]=f)}}function ie(t,l,s,r,e){const o=[...t],f=Array.from({length:n*n},(a,k)=>k);j(f);let c=0;const u=r+Math.floor(Math.random()*(e-r+1));for(const a of f){if(c>=u)break;const k=o[a];o[a]=".",te(o,l,s,2).length===1?c++:o[a]=k}return o}function j(t){for(let l=t.length-1;l>0;l--){const s=Math.floor(Math.random()*(l+1));[t[l],t[s]]=[t[s],t[l]]}}function Ae(t,l,s){for(let r=0;r<t.length;r++)if(t[r]===".")return!1;for(let r=0;r<n;r++){let e=0,o=0,f=0,c=0;for(let u=0;u<n;u++)t[r*n+u]==="O"?e++:o++,t[u*n+r]==="O"?f++:c++;if(e!==v||o!==v||f!==v||c!==v)return!1}for(let r=0;r<n;r++)for(let e=0;e<=n-3;e++){const o=t[r*n+e];if(o===t[r*n+e+1]&&o===t[r*n+e+2])return!1}for(let r=0;r<n;r++)for(let e=0;e<=n-3;e++){const o=t[e*n+r];if(o===t[(e+1)*n+r]&&o===t[(e+2)*n+r])return!1}for(let r=0;r<n;r++)for(let e=0;e<n-1;e++){const o=l[r][e];if(o==="="&&t[r*n+e]!==t[r*n+e+1]||o==="x"&&t[r*n+e]===t[r*n+e+1])return!1}for(let r=0;r<n-1;r++)for(let e=0;e<n;e++){const o=s[r][e];if(o==="="&&t[r*n+e]!==t[(r+1)*n+e]||o==="x"&&t[r*n+e]===t[(r+1)*n+e])return!1}return!0}let O=b(T([])),q=b(T([])),B=b(T([])),D=b(T([])),A=b(T([])),U=b("hard"),R=b(0),F=b(!1),S=b(!0),L=null,E=G(()=>i(q).map(t=>t!==".")),N=G(()=>()=>{const t=Math.floor(i(R)/60),l=i(R)%60;return`${t.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`});function Xe(){Y(),x(R,0),L=setInterval(()=>{je(R)},1e3)}function Y(){L!==null&&(clearInterval(L),L=null)}function $(t){x(U,t,!0),x(S,!0),Y(),setTimeout(()=>{const l=be(t);x(O,[...l.board],!0),x(q,[...l.board],!0),x(B,l.hConstraints,!0),x(D,l.vConstraints,!0),x(A,[],!0),x(F,!1),x(R,0),x(S,!1),Xe()},20)}function ae(t,l){if(i(F)||i(E)[t])return;const s=i(O)[t],r=l?["O","X","."]:[".","X","O"],e=r.indexOf(s),o=r[(e+1)%r.length];x(A,[...i(A),{index:t,previousValue:s}],!0),i(O)[t]=o,Ae(i(O),i(B),i(D))&&(x(F,!0),Y())}function ze(t,l){t.preventDefault(),i(E)[l]||ae(l,!0)}function Re(t,l){t.preventDefault(),i(E)[l]||ae(l,!1)}$("hard");var W=ot(),Z=p(W),H=_(p(Z),2),J=p(H);pe(J,21,()=>ke,xe,(t,l)=>{var s=We();s.__click=[$e,$,l];var r=p(s,!0);g(s),X(()=>{de(s,1,`px-4 py-1.5 rounded-lg text-sm font-medium capitalize transition-all cursor-pointer
              ${i(U)===i(l)?"bg-white text-stone-800 shadow-sm":"text-stone-500 hover:text-stone-700"}`),M(r,i(l))}),y(t,s)}),g(J);var ue=_(J,2),Se=_(p(ue));g(ue),g(H);var K=_(H,2),Ie=p(K);{var Te=t=>{var l=Ze();y(t,l)},Me=t=>{var l=tt();pe(l,21,()=>i(O),xe,(s,r,e)=>{var o=et();const f=G(()=>Math.floor(e/n)),c=G(()=>e%n);var u=p(o);u.__click=h=>ze(h,e),u.__contextmenu=h=>Re(h,e);var a=p(u);{var k=h=>{var m=He();y(h,m)},P=(h,m)=>{{var I=ee=>{var Pe=Je();y(ee,Pe)};z(h,ee=>{i(r)==="X"&&ee(I)},m)}};z(a,h=>{i(r)==="O"?h(k):h(P,!1)})}g(u);var ge=_(u,2);{var Fe=h=>{var m=Ke(),I=p(m,!0);g(m),X(()=>M(I,i(B)[i(f)][i(c)])),y(h,m)};z(ge,h=>{i(c)<n-1&&i(B)[i(f)][i(c)]!=="."&&h(Fe)})}var Le=_(ge,2);{var Ee=h=>{var m=Qe(),I=p(m,!0);g(m),X(()=>M(I,i(D)[i(f)][i(c)])),y(h,m)};z(Le,h=>{i(f)<n-1&&i(D)[i(f)][i(c)]!=="."&&h(Ee)})}g(o),X(()=>de(u,1,`aspect-square w-full flex items-center justify-center rounded-sm transition-colors
                  ${i(E)[e]?"bg-stone-100 cursor-default":"bg-white cursor-pointer hover:bg-stone-50 active:bg-stone-100"}`)),y(s,o)}),g(l),y(t,l)};z(Ie,t=>{i(S)?t(Te):t(Me,!1)})}g(K);var ve=_(K,2),Q=p(ve);Q.__click=[Ue,A,O];var he=_(Q,2);he.__click=[Ne,O,q,A],g(ve),g(Z);var Be=_(Z,2);{var De=t=>{var l=nt(),s=p(l),r=_(p(s),2),e=_(p(r)),o=p(e,!0);g(e),g(r);var f=_(r,2),c=p(f);c.__click=[Ye,N];var u=_(c,2);u.__click=[rt,$,U],g(f),g(s),g(l),X(a=>M(o,a),[()=>i(N)()]),y(t,l)};z(Be,t=>{i(F)&&t(De)})}g(W),X(t=>{M(Se,` ${t??""}`),Q.disabled=i(S)||i(A).length===0,he.disabled=i(S)},[()=>i(N)()]),y(C,W),Ve()}qe(["click","contextmenu"]);export{vt as component};
